# 课设

### 功能

1. 私聊
2. 群聊

### 实现
1. 服务端：
    * 接收到客户端的登录要求，把websocket和用户名作为KEY-VALUE存起来
    * 接受到客户端的消息，判断接收者
        * 如果是另一个UID，那么放进另一个用户的消息队列里
        * 如果是另一个群聊ID，那么放进群的消息队列里

    * 用户UID：用户名
    * 群ID：`@group_${group_name}`

    * 用户消息队列：
        * 把该用户该接收到的信息全部存起来
        * 一个定时器，从消息队列里拿，如果用户在线且消息队列里有消息，则通过websocket发送
    * 群消息队列：
        * 把该群用户该收到的消息全部存起来
        * 一个定时器，从消息队列里拿，然后消费数据，并放进用户对应的队列里

2. 消息组成
    * 消息内容
    * 发送者ID
    * 接收者ID

3. 客户端
    * 发送登陆请求
    * 发送消息
    * 接收消息
        * 如果接收到消息，到对应的绘画view里绘制消息

4. 实现流程
    * 实现消息队列